(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95ba8366"],{"0feb":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return c}));var a=n("b775"),r=function(){return Object(a["a"])({method:"GET",url:"/sys/permission"})};function s(e){return Object(a["a"])({url:"/sys/permission",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/sys/permission/".concat(e),method:"delete"})}function o(e){return Object(a["a"])({url:"/sys/permission/".concat(e.id),method:"put",data:e})}function c(e){return Object(a["a"])({url:"/sys/permission/".concat(e)})}},"5b9e":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("d3b7"),n("159b"),n("14d9");function a(e,t){var n=[];return e.forEach((function(r){if(r.pid===t){var s=a(e,r.id);s.length&&(r.children=s),n.push(r)}})),n}},7424:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dashboard-container"},[n("div",{staticClass:"app-container"},[n("el-card",{attrs:{shadow:"always","body-style":{padding:"20px"}}},[n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"角色管理",name:"first"}},[n("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:e.addRole}},[e._v("新增角色")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[n("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"100"}}),n("el-table-column",{attrs:{align:"center",prop:"name",label:"角色名称",width:"180"}}),n("el-table-column",{attrs:{align:"center",prop:"description",label:"描述"}}),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){return e.assignPermissions(a.id)}}},[e._v("分配权限")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.edit(a.id)}}},[e._v("编辑")]),n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.delCompany(a.id)}}},[e._v("删除")])]}}])})],1),n("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"current-page":e.pageList.page,"page-size":e.pageList.pageSize},on:{"update:currentPage":function(t){return e.$set(e.pageList,"page",t)},"update:current-page":function(t){return e.$set(e.pageList,"page",t)},"current-change":e.handleCurrentChange}})],1)],1),n("el-tab-pane",{attrs:{label:"公司信息",name:"second"}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[n("el-alert",{attrs:{title:"对公司名称、公司地址、营业执照、公司地区的更新，将使得公司资料被重新审核，请谨慎修改",type:"info",effect:"light","show-icon":"",closable:!1}}),n("el-form-item",{staticStyle:{"margin-top":"40px"},attrs:{label:"公司名称"}},[n("el-input",{staticStyle:{width:"400px"},attrs:{disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"公司地址"}},[n("el-input",{staticStyle:{width:"400px"},attrs:{disabled:""},model:{value:e.form.companyAddress,callback:function(t){e.$set(e.form,"companyAddress",t)},expression:"form.companyAddress"}})],1),n("el-form-item",{attrs:{label:"邮箱"}},[n("el-input",{staticStyle:{width:"400px"},attrs:{disabled:""},model:{value:e.form.mailbox,callback:function(t){e.$set(e.form,"mailbox",t)},expression:"form.mailbox"}})],1),n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",disabled:""},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1)],1)],1),n("el-dialog",{attrs:{title:"编辑员工",visible:e.dialog,width:"40%"},on:{close:e.btnCancel}},[n("el-form",{ref:"formDate",attrs:{model:e.formDate,rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[n("el-input",{model:{value:e.formDate.name,callback:function(t){e.$set(e.formDate,"name",t)},expression:"formDate.name"}})],1),n("el-form-item",{attrs:{label:"角色描述",prop:"description"}},[n("el-input",{model:{value:e.formDate.description,callback:function(t){e.$set(e.formDate,"description",t)},expression:"formDate.description"}})],1)],1),n("el-row",{attrs:{slot:"footer",type:"flex",justify:"center"},slot:"footer"},[n("el-col",{attrs:{span:8}},[n("el-button",{attrs:{size:"small"},on:{click:e.btnCancel}},[e._v("取消")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.btnOK}},[e._v("确定")])],1)],1)],1),n("el-dialog",{attrs:{title:"分配权限",visible:e.isShow,width:"30%"},on:{"update:visible":function(t){e.isShow=t},close:e.btnPermissionsCal}},[n("el-tree",{ref:"tree",attrs:{data:e.list,props:e.defaultProps,"show-checkbox":"","default-expand-all":"","check-strictly":!0,"node-key":"id","default-checked-keys":e.permissionId},on:{close:e.btnPermissionsCal}}),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-row",{attrs:{span:6,type:"flex",justify:"center"}},[n("el-button",{on:{click:e.btnPermissionsCal}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.btnPermissionsSubmit}},[e._v("确认")])],1)],1)],1)],1)])},r=[],s=n("c7eb"),i=n("1da1"),o=n("5530"),c=n("90e7"),l=n("0feb"),u=n("5b9e"),d=n("2f62"),f={data:function(){return{activeName:"first",form:{},list:[],pageList:{page:1,pageSize:10},dialog:!1,isShow:!1,tableData:[],total:1,formDate:{description:"",name:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]},defaultProps:{label:"name"},permissionId:[],roleId:""}},computed:Object(o["a"])({},Object(d["b"])(["userInfo"])),created:function(){this.initRoleList(),this.getCompanyList()},methods:{initRoleList:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["f"])(e.pageList);case 2:n=t.sent,a=n.data,e.tableData=a.rows,e.total=a.total;case 6:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.pageList.page=e,this.initRoleList()},getCompanyList:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["e"])(e.userInfo.companyId);case 2:n=t.sent,a=n.data,e.form=a;case 5:case"end":return t.stop()}}),t)})))()},delCompany:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function n(){return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$confirm("确认删除吗",{confirmButtonText:"确认",cancelButtonText:"取消",type:"success"});case 3:return n.next=5,Object(c["d"])(e);case 5:t.initRoleList(),t.$message.success("删除角色成功"),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()},addRole:function(){this.dialog=!0},btnCancel:function(){this.dialog=!1,this.formDate={},this.$refs.formDate.resetFields()},btnOK:function(){var e=this;this.$refs.formDate.validate(function(){var t=Object(i["a"])(Object(s["a"])().mark((function t(n){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=11;break}if(!e.formDate.id){t.next=6;break}return t.next=4,Object(c["h"])(e.formDate);case 4:t.next=8;break;case 6:return t.next=8,Object(c["a"])(e.formDate);case 8:e.initRoleList(),e.$message.success("操作成功"),e.dialog=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},edit:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function n(){var a,r;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.dialog=!0,n.next=3,Object(c["g"])(e);case 3:a=n.sent,r=a.data,t.formDate=r;case 6:case"end":return n.stop()}}),n)})))()},assignPermissions:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function n(){var a,r,i;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.roleId=e,t.isShow=!0,n.next=4,Object(l["c"])();case 4:return a=n.sent,r=a.data,n.next=8,Object(u["a"])(r,"0");case 8:return t.list=n.sent,n.next=11,Object(c["g"])(e);case 11:i=n.sent,t.permissionId=i.data.permIds;case 13:case"end":return n.stop()}}),n)})))()},btnPermissionsSubmit:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["b"])({id:e.roleId,permIds:e.$refs.tree.getCheckedKeys()});case 2:e.$message.success("分配权限成功"),e.isShow=!1;case 4:case"end":return t.stop()}}),t)})))()},btnPermissionsCal:function(){this.permissionId=[],this.isShow=!1}}},p=f,m=n("2877"),b=Object(m["a"])(p,a,r,!1,null,null,null);t["default"]=b.exports},"90e7":function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d}));var a=n("b775"),r=function(e){return a["a"].get("/sys/role",{params:{page:e.page,pagesize:e.pagesize}})},s=function(e){return a["a"].get("/company/".concat(e))},i=function(e){return a["a"].delete("/sys/role/".concat(e))};function o(e){return Object(a["a"])({url:"/sys/role/".concat(e)})}function c(e){return Object(a["a"])({url:"/sys/role/".concat(e.id),method:"PUT",data:e})}function l(e){return Object(a["a"])({url:"/sys/role",data:e,method:"post"})}function u(e){return Object(a["a"])({url:"/sys/user/assignRoles",data:e,method:"put"})}function d(e){return Object(a["a"])({url:"/sys/role/assignPrem",data:e,method:"put"})}}}]);