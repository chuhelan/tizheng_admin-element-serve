(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-726e1cb9"],{"0b62":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"app-container"},[a("PageTools",{attrs:{flag:e.flag=!0},scopedSlots:e._u([{key:"before",fn:function(){return[a("span",[e._v("总记录数"+e._s(e.pageList.total))])]},proxy:!0},{key:"after",fn:function(){return[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(t){return e.$router.push("/import")}}},[e._v("导入")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.exportJson}},[e._v("导出")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleDialog}},[e._v("新增员工")])]},proxy:!0}])}),a("el-card",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.list}},[a("el-table-column",{attrs:{label:"序号",type:"index",sortable:""}}),a("el-table-column",{attrs:{label:"姓名",prop:"username",sortable:""}}),a("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("img",{directives:[{name:"imageError",rawName:"v-imageError",value:e.defaultImage,expression:"defaultImage"}],staticStyle:{"border-radius":"50%",width:"100px",height:"100px",padding:"10px"},attrs:{src:r.staffPhoto},on:{click:function(t){return e.showQrcode(r.staffPhoto)}}})]}}])}),a("el-table-column",{attrs:{label:"工号",prop:"workNumber",sortable:""}}),a("el-table-column",{attrs:{label:"聘用形式",prop:"formOfEmployment",sortable:"",formatter:e.handleFormatter}}),a("el-table-column",{attrs:{label:"部门",prop:"departmentName",sortable:""}}),a("el-table-column",{attrs:{label:"入职时间",prop:"timeOfEntry",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFormat")(t.row.timeOfEntry,"YYYY-MM-DD"))+" ")]}}])}),a("el-table-column",{attrs:{label:"账户状态",prop:"enableState",sortable:""},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("el-switch",{attrs:{value:1===t.enableState}})]}}])}),a("el-table-column",{attrs:{label:"操作",prop:"username",sortable:"",fixed:"right",width:"265"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$router.push("/detail/"+r.id)}}},[e._v("查看")]),a("el-button",{attrs:{type:"text",size:"small"}},[e._v("转正")]),a("el-button",{attrs:{type:"text",size:"small"}},[e._v("调岗")]),a("el-button",{attrs:{type:"text",size:"small"}},[e._v("离职")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showRdbc(r.id)}}},[e._v("角色")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.delEmployee(r.id)}}},[e._v("删除")])]}}])})],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-pagination",{attrs:{"current-page":e.pageList.page,"page-size":e.pageList.size,layout:"prev, pager, next",total:e.pageList.total},on:{"current-change":e.currentChange}})],1)],1)],1),a("AddEmploers",{attrs:{dialog:e.dialog},on:{"update:dialog":function(t){e.dialog=t}}}),a("el-dialog",{attrs:{title:"二维码",visible:e.showQr,width:"30%"},on:{"update:visible":function(t){e.showQr=t}}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("canvas",{ref:"myCanvas"})])],1),a("AssignRole",{ref:"roleList",attrs:{"show-rdbc-dialog":e.showRdbcDialog,"user-id":e.userId},on:{"update:showRdbcDialog":function(t){e.showRdbcDialog=t},"update:show-rdbc-dialog":function(t){e.showRdbcDialog=t}}})],1)},n=[],i=a("c7eb"),o=a("1da1"),l=(a("7db0"),a("d3b7"),a("d81d"),a("b64b"),a("3ca3"),a("ddb0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"权限分配",visible:e.showRdbcDialog,width:"30%"},on:{"update:visible":function(t){e.showRdbcDialog=t},close:e.btnCal}},[a("span",[a("el-checkbox-group",{model:{value:e.roleList,callback:function(t){e.roleList=t},expression:"roleList"}},e._l(e.list,(function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.btnCal}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确认")])],1)])],1)}),s=[],u=a("90e7"),c=a("c24f"),d={name:"HrsaasAssignRole",props:{showRdbcDialog:{type:Boolean,default:!1},userId:{type:String,default:""}},data:function(){return{roleList:[],list:[],pageList:{page:1,pagesize:20}}},created:function(){this.initList()},mounted:function(){},methods:{initList:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["f"])(e.pageList);case 2:a=t.sent,r=a.data,e.list=r.rows;case 5:case"end":return t.stop()}}),t)})))()},initRoleList:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var r,n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["e"])(e);case 2:r=a.sent,n=r.data,t.roleList=n.roleIds;case 5:case"end":return a.stop()}}),a)})))()},submit:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u["c"])({id:e.userId,roleIds:e.roleList});case 3:e.$emit("update:showRdbcDialog",!1),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},btnCal:function(){this.roleList=[],this.$emit("update:showRdbcDialog",!1)}}},m=d,f=a("2877"),p=Object(f["a"])(m,l,s,!1,null,"05331715",null),b=p.exports,v=a("e302"),h=a("dfa6"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"新增员工",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t},close:e.btnCanel}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"username"}},[a("el-input",{staticStyle:{width:"65%"},attrs:{placeholder:"请输入姓名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{staticStyle:{width:"65%"},attrs:{placeholder:"请输入手机"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),a("el-form-item",{attrs:{label:"入职时间",prop:"timeOfEntry"}},[a("el-date-picker",{staticStyle:{width:"65%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.timeOfEntry,callback:function(t){e.$set(e.form,"timeOfEntry",t)},expression:"form.timeOfEntry"}}),e._v("· ")],1),a("el-form-item",{attrs:{label:"聘用形式",prop:"formOfEmployment"}},[a("el-select",{staticStyle:{width:"65%"},attrs:{placeholder:"请选择活动区域"},model:{value:e.form.formOfEmployment,callback:function(t){e.$set(e.form,"formOfEmployment",t)},expression:"form.formOfEmployment"}},e._l(e.EmployeeList.hireType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"工号",prop:"workNumber"}},[a("el-input",{staticStyle:{width:"65%"},attrs:{placeholder:"请输入工号"},model:{value:e.form.workNumber,callback:function(t){e.$set(e.form,"workNumber",t)},expression:"form.workNumber"}})],1),a("el-form-item",{attrs:{label:"部门",prop:"departmentName"}},[a("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"65%"},attrs:{placeholder:"请选择部门"},on:{focus:e.handleFocus},model:{value:e.form.departmentName,callback:function(t){e.$set(e.form,"departmentName",t)},expression:"form.departmentName"}}),e.flag?a("el-tree",{attrs:{data:e.tableDate,props:e.defaultProps,"default-expand-all":""},on:{"node-click":e.select}}):e._e()],1),a("el-form-item",{attrs:{label:"转正时间",prop:"correctionTime"}},[a("el-date-picker",{staticStyle:{width:"65%"},attrs:{type:"date",placeholder:"转正时间"},model:{value:e.form.correctionTime,callback:function(t){e.$set(e.form,"correctionTime",t)},expression:"form.correctionTime"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-row",{staticStyle:{"margin-right":"65px"},attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{size:"small"},on:{click:e.btnCanel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitList}},[e._v("确定")])],1)],1)],1)],1)],1)},y=[],w=(a("b0c0"),a("0e8f")),O=a("5b9e"),x={name:"HrsaasAddEmploers",props:{dialog:{type:Boolean,default:!1}},data:function(){return{loading:!1,EmployeeList:h["a"],form:{username:"",mobile:"",formOfEmployment:"",workNumber:"",departmentName:"",timeOfEntry:"",correctionTime:""},defaultProps:{label:"name"},tableDate:[],rules:{username:[{required:!0,message:"用户姓名不能为空",trigger:"blur"},{min:1,max:4,message:"用户姓名为1-4位"}],mobile:[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}],formOfEmployment:[{required:!0,message:"聘用形式不能为空",trigger:"blur"}],workNumber:[{required:!0,message:"工号不能为空",trigger:"blur"}],departmentName:[{required:!0,message:"部门不能为空",trigger:"change"}],timeOfEntry:[{required:!0,message:"入职时间",trigger:"blur"}]},flag:!1}},mounted:function(){},methods:{handleFocus:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(w["e"])();case 3:a=t.sent,r=a.data,e.tableDate=Object(O["a"])(r.depts,""),e.flag=!0,e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},select:function(e){this.form.departmentName=e.name,this.flag=!1},btnCanel:function(){this.form={},this.$emit("update:dialog",!1),this.$refs.form.resetFields()},submitList:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:return t.next=5,Object(v["a"])(e.form);case 5:e.$parent.initGetEmployeeList(),e.$message.success("新增员工成功"),e.btnCanel(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}},k=x,j=Object(f["a"])(k,g,y,!1,null,"bf1853cc",null),_=j.exports,E=a("d055"),L=a.n(E),$={components:{AddEmploers:_,AssignRole:b},data:function(){return{list:[],defaultImage:a("616f"),pageList:{page:1,size:10,total:0},dialog:!1,showQr:!1,showRdbcDialog:!1,userId:""}},created:function(){this.initGetEmployeeList()},methods:{initGetEmployeeList:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(v["c"])(e.pageList);case 3:a=t.sent,r=a.data,e.list=r.rows,e.pageList.total=r.total,e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},currentChange:function(e){this.pageList.page=e,this.initGetEmployeeList()},handleFormatter:function(e){var t=h["a"].hireType.find((function(t){return t.id===e.formOfEmployment}));return t?t.value:"未声明"},delEmployee:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm("确认删除吗",{confirmButtonText:"确认",cancelButtonText:"取消"});case 3:return a.next=5,Object(v["b"])(e);case 5:t.initGetEmployeeList(),t.$message.success("删除成功"),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},handleDialog:function(){this.dialog=!0},formatJson:function(e,t){var a=this;return t.map((function(t){return Object.keys(e).map((function(r){if("入职日期"===r||"转正日期"===r)return null===t[e[r]]?(t[e[r]]="",t[e[r]]):(t[e[r]]=a.$moment(t[e[r]]).format("YYYY-MM-DD"),t[e[r]]);if("聘用形式"===r){var n=h["a"].hireType.find((function(a){return a.id===t[e[r]]}));return n.value?n.value:"未声明"}return t[e[r]]}))}))},exportJson:function(){var e=this,t={"姓名":"username","手机号":"mobile","入职日期":"timeOfEntry","聘用形式":"formOfEmployment","转正日期":"correctionTime","工号":"workNumber","部门":"departmentName"};Promise.all([a.e("chunk-82998562"),a.e("chunk-2d0cc0b6")]).then(a.bind(null,"4bf8")).then(function(){var a=Object(o["a"])(Object(i["a"])().mark((function a(r){var n,o,l,s,u;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(v["c"])({page:1,size:e.pageList.total});case 2:n=a.sent,o=n.data,l=e.formatJson(t,o.rows),s=[["姓名","主要信息","","","","","部门"]],u=["A1:A2","B1:F1","G1:G2"],r.export_json_to_excel({header:Object.keys(t),data:l,multiHeader:s,merges:u});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},showQrcode:function(e){var t=this;e?(this.showQr=!0,this.$nextTick((function(){return L.a.toCanvas(t.$refs.myCanvas,e)}))):this.$message.warning("头像未上传")},showRdbc:function(e){this.userId=e,this.showRdbcDialog=!0,this.$refs.roleList.initRoleList(e)}}},S=$,D=Object(f["a"])(S,r,n,!1,null,null,null);t["default"]=D.exports},"0e8f":function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return s}));var r=a("b775"),n=function(){return r["a"].get("/company/department")},i=function(e){return r["a"].delete("/company/department/".concat(e))},o=function(e){return r["a"].post("/company/department",e)},l=function(e){return r["a"].get("/company/department/".concat(e))},s=function(e){return Object(r["a"])({url:"/company/department/".concat(e.id),method:"put",data:e})}},"5b9e":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("d3b7"),a("159b"),a("14d9");function r(e,t){var a=[];return e.forEach((function(n){if(n.pid===t){var i=r(e,n.id);i.length&&(n.children=i),a.push(n)}})),a}},"90e7":function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"g",(function(){return l})),a.d(t,"h",(function(){return s})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return d}));var r=a("b775"),n=function(e){return r["a"].get("/sys/role",{params:{page:e.page,pagesize:e.pagesize}})},i=function(e){return r["a"].get("/company/".concat(e))},o=function(e){return r["a"].delete("/sys/role/".concat(e))};function l(e){return Object(r["a"])({url:"/sys/role/".concat(e)})}function s(e){return Object(r["a"])({url:"/sys/role/".concat(e.id),method:"PUT",data:e})}function u(e){return Object(r["a"])({url:"/sys/role",data:e,method:"post"})}function c(e){return Object(r["a"])({url:"/sys/user/assignRoles",data:e,method:"put"})}function d(e){return Object(r["a"])({url:"/sys/role/assignPrem",data:e,method:"put"})}},dfa6:function(e,t,a){"use strict";t["a"]={hireType:[{id:1,value:"正式"},{id:2,value:"非正式"}],subjection:[{id:"1",value:"总部"},{id:"2",value:"分城市"}],workingState:[{id:"1",value:"在职"},{id:"2",value:"离职"}],leaveType:[{id:"1",value:"主动离职"},{id:"2",value:"被动离职"},{id:"3",value:"退休"}],attritionMonth:[{id:"1",value:"离职日本月"},{id:"2",value:"离职日次月"}],informaltype:[{id:"2",value:"实习"},{id:"3",value:"劳务"},{id:"4",value:"顾问"},{id:"5",value:"返聘"},{id:"6",value:"外包"}],highestDegree:[{id:"1",value:"初中"},{id:"2",value:"高中"},{id:"3",value:"中专"},{id:"4",value:"大专"},{id:"5",value:"本科"},{id:"6",value:"硕士"},{id:"7",value:"博士"},{id:"8",value:"其他"}],isOverseas:[{id:"1",value:"中国大陆"},{id:"2",value:"港澳台国外"}],gender:[{id:"1",value:"男"},{id:"2",value:"女"}],maritaStatus:[{id:"1",value:"未婚"},{id:"2",value:"已婚"},{id:"3",value:"离异"}],animalSymbol:[{id:"1",value:"鼠"},{id:"2",value:"牛"},{id:"3",value:"虎"},{id:"4",value:"兔"},{id:"5",value:"龙"},{id:"6",value:"蛇"},{id:"7",value:"马"},{id:"8",value:"羊"},{id:"9",value:"猴"},{id:"10",value:"鸡"},{id:"11",value:"狗"},{id:"12",value:"猪"}],constellation:[{code:1,value:"水瓶座"},{code:2,value:"双鱼座"},{code:3,value:"白羊座"},{code:4,value:"金牛座"},{code:5,value:"双子座"},{code:6,value:"巨蟹座"},{code:7,value:"狮子座"},{code:8,value:"处女座"},{code:9,value:"天秤座"},{code:10,value:"天蝎座"},{code:11,value:"射手座"},{code:12,value:"摩羯座"}],bloodType:[{id:"1",value:"A型"},{id:"2",value:"B型"},{id:"3",value:"O型"},{id:"4",value:"AB型"}],educationType:[{id:"1",value:"统招"},{id:"2",value:"自考"},{id:"3",value:"成考"}],positiveType:[{id:"1",value:"已转正"},{id:"2",value:"未转正"}],contractPeriod:[{id:"1",value:"6月"},{id:"2",value:"12月"},{id:"3",value:"24月"},{id:"4",value:"36月"},{id:"5",value:"其他"}],renewalCount:[{id:1,value:"0次"},{id:2,value:"1次"},{id:3,value:"2次"},{id:4,value:"3次"},{id:5,value:"4次或以上"}],resumeSource:[{id:"1",value:"智联招聘"},{id:"2",value:"拉勾网"},{id:"3",value:"前程无忧"},{id:"4",value:"猎聘网"},{id:"5",value:"校园宣讲"},{id:"6",value:"猎头"},{id:"7",value:"内部推荐"}],hireSourceType:[{id:"1",value:"社招"},{id:"2",value:"校招"}],departments:[{id:"1",value:"总裁办"},{id:"2",value:"研究院"}],stausInfos:[{id:"1",value:"在职"},{id:"2",value:"入职"},{id:"3",value:"离职"}]}},e302:function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"e",(function(){return s}));var r=a("b775"),n=function(){return r["a"].get("/sys/user/simple")};function i(e){return Object(r["a"])({url:"/sys/user",params:e})}function o(e){return Object(r["a"])({url:"/sys/user/".concat(e),method:"delete"})}var l=function(e){return Object(r["a"])({url:"/sys/user",method:"POST",data:e})};function s(e){return Object(r["a"])({url:"/sys/user/batch",method:"post",data:e})}}}]);